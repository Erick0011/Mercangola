<!-- meta tags and other links -->
<!DOCTYPE html>
<html lang="pt" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mercangola | Cadastro</title>
    {% include "dashboard/links-css.html"%}
</head>

<body>

    <section class="auth bg-base d-flex flex-wrap">
        <div class="auth-left d-lg-block d-none">
            <div class="d-flex align-items-center flex-column h-100 justify-content-center">
                <img src="{{ url_for('static', filename='assets-1/images/auth/auth-img.png') }}" alt="Imagem de autenticação">
            </div>
        </div>
        <div class="auth-right py-32 px-24 d-flex flex-column justify-content-center">
            <div class="max-w-464-px mx-auto w-100">
                <div>
                    <a href="{{ url_for('public.home') }}" class="mb-40 max-w-290-px">
                        <img src="{{ url_for('static', filename='assets-1/images/logo.png') }}" alt="Logo">

                    </a>
                    <h4 class="mb-12">Criar Conta</h4>
                    <p class="mb-32 text-secondary-light text-lg">Preencha os dados para criar sua conta e sua loja</p>
                </div>
                <form action="/register_store_owner" method="post" class="needs-validation" novalidate>
                    <!-- Nome -->
                    <div class="icon-field mb-16 has-validation">
                        <span class="icon top-50 translate-middle-y">
                            <iconify-icon icon="f7:person"></iconify-icon>
                        </span>
                        <input type="text" name="name" id="name" class="form-control h-56-px bg-neutral-50 radius-12"
                            placeholder="Seu nome" required>
                        <div class="invalid-feedback">Digite seu nome</div>
                    </div>

                    <!-- Email -->
                    <div class="icon-field mb-16 has-validation">
                        <span class="icon top-50 translate-middle-y">
                            <iconify-icon icon="mage:email"></iconify-icon>
                        </span>
                        <input type="email" name="email" class="form-control h-56-px bg-neutral-50 radius-12"
                            placeholder="Seu email" required>
                        <div class="invalid-feedback">Digite um email válido</div>
                    </div>

                    <!-- Senha -->
                    <div class="mb-16 has-validation">
                        <div class="position-relative">
                            <div class="icon-field">
                                <span class="icon top-50 translate-middle-y" style="right: 2.5rem;">
                                    <iconify-icon icon="solar:lock-password-outline"></iconify-icon>
                                </span>
                                <input type="password" name="password"
                                    class="form-control h-56-px bg-neutral-50 radius-12" id="password"
                                    placeholder="Senha (mín. 6 caracteres)" required minlength="8">
                                <div class="invalid-feedback">A senha deve ter pelo menos 8 caracteres</div>
                            </div>
                            <span
                                class="toggle-password ri-eye-line cursor-pointer position-absolute end-0 top-50 translate-middle-y me-16 text-secondary-light"
                                data-toggle="#password"></span>
                        </div>
                    </div>

                    <!-- Confirmar senha -->
                    <div class="mb-16 has-validation">
                        <div class="position-relative">
                            <div class="icon-field">
                                <span class="icon top-50 translate-middle-y ">
                                    <iconify-icon icon="solar:lock-password-outline"></iconify-icon>
                                </span>
                                <input type="password" name="confirm_password"
                                    class="form-control h-56-px bg-neutral-50 radius-12" id="confirm_password"
                                    placeholder="Confirmar senha" required>
                                <div class="invalid-feedback">Confirme sua senha</div>
                            </div>
                            <span
                                class="toggle-password ri-eye-line cursor-pointer position-absolute end-0 top-50 translate-middle-y me-16 text-secondary-light"
                                data-toggle="#confirm_password"></span>
                        </div>
                    </div>

                    <!-- Nome da loja -->
                    <div class="icon-field mb-16 has-validation">
                        <span class="icon top-50 translate-middle-y">
                            <iconify-icon icon="icon-park-outline:shop"></iconify-icon>
                        </span>
                        <input type="text" name="store_name" id="store_name"
                            class="form-control h-56-px bg-neutral-50 radius-12" placeholder="Nome da loja" required>
                        <div class="invalid-feedback">Digite o nome da loja</div>
                    </div>

                    <!-- Slug (gerado automaticamente) -->
                    <div class="icon-field mb-16 has-validation">
                        <span class="icon top-50 translate-middle-y">
                            <iconify-icon icon="ri:link"></iconify-icon>
                        </span>
                        <input type="text" name="slug" id="slug" class="form-control h-56-px bg-neutral-50 radius-12"
                            placeholder="Slug da loja (URL)" required readonly>
                        <div class="invalid-feedback">Slug obrigatório</div>
                    </div>

                    <!-- Aceitação dos termos -->
                    <div class="form-check style-check d-flex align-items-start mb-16 has-validation">
                        <input class="form-check-input border border-neutral-300 mt-4" type="checkbox" id="condition"
                            name="condition" required>
                        <label class="form-check-label text-sm" for="condition">
                            Ao criar uma conta, você concorda com os
                            <a href="javascript:void(0)" class="text-primary-600 fw-semibold">Termos e Condições</a> e
                            nossa
                            <a href="javascript:void(0)" class="text-primary-600 fw-semibold">Política de
                                Privacidade</a>.
                        </label>
                        <div class="invalid-feedback mt-2">Você precisa aceitar os termos</div>
                    </div>

                    <!-- Botão -->
                    <button type="submit" class="btn btn-primary text-sm btn-sm px-12 py-16 w-100 radius-12 mt-32">Criar
                        Conta</button>

                    <!-- Alternativas de cadastro -->
                    <div class="mt-32 center-border-horizontal text-center">
                        <span class="bg-base z-1 px-4">Ou cadastre-se com</span>
                    </div>
                    <div class="mt-32 d-flex align-items-center gap-3">
                        <button type="button"
                            class="fw-semibold text-primary-light py-16 px-24 w-50 border radius-12 text-md d-flex align-items-center justify-content-center gap-12 line-height-1 bg-hover-primary-50">
                            <iconify-icon icon="ic:baseline-facebook"
                                class="text-primary-600 text-xl line-height-1"></iconify-icon>
                            Facebook
                        </button>
                        <button type="button"
                            class="fw-semibold text-primary-light py-16 px-24 w-50 border radius-12 text-md d-flex align-items-center justify-content-center gap-12 line-height-1 bg-hover-primary-50">
                            <iconify-icon icon="logos:google-icon"
                                class="text-primary-600 text-xl line-height-1"></iconify-icon>
                            Google
                        </button>
                    </div>

                    <!-- Login existente -->
                    <div class="mt-32 text-center text-sm">
                        <p class="mb-0">Já tem uma conta? <a href="{{ url_for('public.login') }}"
                                class="text-primary-600 fw-semibold">Entrar</a></p>
                    </div>
                </form>


            </div>
        </div>
    </section>
    {% include "dashboard/links-js.html"%}
    {% include 'includes/flash_toasts.html' %}

    <script>
        document.getElementById('store_name').addEventListener('input', function () {
            const storeName = this.value;
            const slug = storeName
                .toLowerCase()
                .normalize('NFD').replace(/[\u0300-\u036f]/g, '') // remove acentos
                .replace(/[^a-z0-9]+/g, '-') // substitui por hífens
                .replace(/(^-|-$)/g, ''); // remove hífens do começo e fim
            document.getElementById('slug').value = slug;
        });
        document.querySelector('form').addEventListener('submit', function (e) {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirm_password');

            if (password !== confirmPassword.value) {
                e.preventDefault(); // impede o envio do formulário
                confirmPassword.setCustomValidity("As senhas não coincidem");
                confirmPassword.reportValidity();
            } else {
                confirmPassword.setCustomValidity("");
            }
        });

    </script>


    <script>
        (() => {
            'use strict'

            // Fetch all the forms we want to apply custom Bootstrap validation styles to
            const forms = document.querySelectorAll('.needs-validation')

            // Loop over them and prevent submission
            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }

                    form.classList.add('was-validated')
                }, false)
            })
        })()
    </script>


    <script>
        // ================== Password Show Hide Js Start ==========
        function initializePasswordToggle(toggleSelector) {
            $(toggleSelector).on('click', function () {
                $(this).toggleClass("ri-eye-off-line");
                var input = $($(this).attr("data-toggle"));
                if (input.attr("type") === "password") {
                    input.attr("type", "text");
                } else {
                    input.attr("type", "password");
                }
            });
        }
        // Call the function
        initializePasswordToggle('.toggle-password');
        // ========================= Password Show Hide Js End ===========================
    </script>

</body>

</html>